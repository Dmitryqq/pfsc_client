(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7c19"],{"77be":function(s,e,t){"use strict";t.r(e);var r=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"account view"},[t("Navbar"),s.isLoading?t("Loader"):t("div",{staticClass:"col-sm-6 col-md-4 mx-auto my-5"},[s.error?t("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[s._v("\n            "+s._s(s.error)+"\n        ")]):s._e(),s.success?t("div",{staticClass:"alert alert-success"},[s._v("\n            "+s._s(s.success)+"\n        ")]):s._e(),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-4 col-form-label"},[s._v("id:")]),t("div",{staticClass:"col-sm-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user.id,expression:"user.id"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:""},domProps:{value:s.user.id},on:{input:function(e){e.target.composing||s.$set(s.user,"id",e.target.value)}}})])]),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-4 col-form-label"},[s._v("Логин:")]),t("div",{staticClass:"col-sm-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user.username,expression:"user.username"}],staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:s.user.username},on:{input:function(e){e.target.composing||s.$set(s.user,"username",e.target.value)}}})])]),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-4 col-form-label"},[s._v("Пароль:")]),t("div",{staticClass:"col-sm-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user.password,expression:"user.password"}],staticClass:"form-control form-control-sm",attrs:{type:"password"},domProps:{value:s.user.password},on:{input:function(e){e.target.composing||s.$set(s.user,"password",e.target.value)}}})])]),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-4 col-form-label"},[s._v("Повторите пароль:")]),t("div",{staticClass:"col-sm-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.repeatedPassword,expression:"repeatedPassword"}],staticClass:"form-control form-control-sm",attrs:{type:"password"},domProps:{value:s.repeatedPassword},on:{input:function(e){e.target.composing||(s.repeatedPassword=e.target.value)}}})])]),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-4 col-form-label"},[s._v("Имя:")]),t("div",{staticClass:"col-sm-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user.name,expression:"user.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",disabled:""},domProps:{value:s.user.name},on:{input:function(e){e.target.composing||s.$set(s.user,"name",e.target.value)}}})])]),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-sm-4 col-form-label"},[s._v("Email:")]),t("div",{staticClass:"col-sm-8"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.user.email,expression:"user.email"}],staticClass:"form-control form-control-sm",attrs:{type:"email"},domProps:{value:s.user.email},on:{input:function(e){e.target.composing||s.$set(s.user,"email",e.target.value)}}})])]),t("div",{staticClass:"text-center my-5"},[t("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit"},on:{click:function(e){return s.saveUser(s.user)}}},[s._v("Сохранить")])]),t("p",{staticClass:"text-center"},[s._v("Если изменение пароля не требуется, то оставьте поле пустым")])])],1)},a=[],o=t("d178"),i=t("555f"),l={name:"Account",components:{Navbar:o["a"],Loader:i["a"]},data:function(){return{user:{username:"",password:"",name:"",email:""},repeatedPassword:"",isLoading:!1,success:null,error:null}},computed:{userId:function(){return this.$store.state.users.user.id}},created:function(){this.$store.dispatch("users/decodeUser"),this.getUser()},methods:{getUser:function(){var s=this;this.isLoading=!0,this.$store.dispatch("users/getUser",this.userId).then(function(e){s.user=e,s.user.password="",s.isLoading=!1}).catch(function(e){s.isLoading=!1,s.error=e.message})},saveUser:function(s){var e=this;this.errors=[],this.success="",1==this.checkFields()?this.user.password==this.repeatedPassword?this.$store.dispatch("users/updateUser",s).then(function(){e.error="",e.showSuccess("Сохранено. Перезайдите, чтобы изменения вступили в силу.")}).catch(function(s){e.error=s.message}):this.error="Пароли не совпадают":this.error="Заполните пустые поля"},showSuccess:function(s){var e=this;this.success=s,setTimeout(function(){e.success=null},8e3)},checkFields:function(){return""!=this.user.username&&""!=this.user.email}}},c=l,n=t("2877"),u=Object(n["a"])(c,r,a,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0d7c19.14462559.js.map