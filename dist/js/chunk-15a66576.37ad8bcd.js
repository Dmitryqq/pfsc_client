(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15a66576"],{"20bd":function(t,e,i){"use strict";var n=i("a768"),s=i.n(n);s.a},5709:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"configs view"},[t.isLoading?i("Loader"):i("div",[t.error?i("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v("\n            "+t._s(t.error)+"\n        ")]):t._e(),t.success?i("div",{staticClass:"alert alert-success"},[t._v("\n            "+t._s(t.success)+"\n        ")]):t._e(),i("table",{staticClass:"table table-sm table-responsive"},[i("thead",[i("tr",[i("th",[t._v("№")]),i("th",[t._v("Имя")]),i("th",[t._v("Значение")]),i("th",[t._v("Описание")]),i("th"),i("th")])]),t._l(t.configs,function(e){return i("tr",{key:e.id},[i("td",[t._v(t._s(e.id))]),t.editMode&&e.id==t.seletedConfig.id?i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"config.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",required:""},domProps:{value:e.name},on:{input:function(i){i.target.composing||t.$set(e,"name",i.target.value)}}})]):i("td",[t._v(t._s(e.name))]),t.editMode&&e.id==t.seletedConfig.id?i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"config.value"}],staticClass:"form-control form-control-sm",attrs:{type:"text",required:""},domProps:{value:e.value},on:{input:function(i){i.target.composing||t.$set(e,"value",i.target.value)}}})]):i("td",[t._v(t._s(e.value))]),t.editMode&&e.id==t.seletedConfig.id?i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"config.description"}],staticClass:"form-control form-control-sm",attrs:{type:"text",rows:"1"},domProps:{value:e.description},on:{input:function(i){i.target.composing||t.$set(e,"description",i.target.value)}}})]):i("td",[t._v(t._s(e.description))]),t.editMode&&e.id==t.seletedConfig.id?i("td",[i("span",{staticClass:"icon-btn"},[i("i",{staticClass:"fas fa-save",staticStyle:{"margin-left":"2px"},on:{click:function(i){return t.updateConfig(e)}}}),i("i",{staticClass:"fas fa-times",staticStyle:{"margin-left":"23px"},on:{click:t.disableEditMode}})])]):i("td",[i("span",{staticClass:"icon-btn"},[i("i",{staticClass:"fas fa-edit",on:{click:function(i){return t.enableEditMode(e)}}}),i("i",{staticClass:"fas fa-trash",staticStyle:{"margin-left":"20px"},on:{click:function(i){return t.deleteConfig(e)}}})])])])}),i("tr",[i("td"),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.config.name,expression:"config.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",required:""},domProps:{value:t.config.name},on:{input:function(e){e.target.composing||t.$set(t.config,"name",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.config.value,expression:"config.value"}],staticClass:"form-control form-control-sm col-sm-12",attrs:{type:"text"},domProps:{value:t.config.value},on:{input:function(e){e.target.composing||t.$set(t.config,"value",e.target.value)}}})]),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.config.description,expression:"config.description"}],staticClass:"form-control form-control-sm",attrs:{type:"text",rows:"1"},domProps:{value:t.config.description},on:{input:function(e){e.target.composing||t.$set(t.config,"description",e.target.value)}}})]),i("td",[i("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"submit"},on:{click:t.addConfig}},[t._v("Добавить")])])])],2)])],1)},s=[],o=(i("7f7f"),i("555f")),a={components:{Loader:o["a"]},data:function(){return{config:{name:"",value:"",description:""},isLoading:!1,success:null,deleteMode:!1,editMode:!1,error:null,seletedConfig:{}}},computed:{configs:function(){return this.$store.state.configs.configs}},created:function(){this.getConfigs()},methods:{getConfigs:function(){var t=this;this.isLoading=!0,this.$store.dispatch("configs/getConfigs").catch(function(e){t.error=e.message}).finally(function(){t.isLoading=!1})},addConfig:function(){var t=this;this.error=null,this.config.name.length>0&&this.config.value.length>0&&this.$store.dispatch("configs/addConfig",this.config).then(function(){t.showSuccess("Конфигурация успешно добавлена"),t.clearForm()}).catch(function(e){t.error=e.message})},deleteConfig:function(t){var e=this;confirm("Подтвердите удаление элемента '"+t.name+"'")&&this.$store.dispatch("configs/deleteConfig",t.id).then(function(){e.error=null,e.showSuccess("Конфигурация успешно удалена")}).catch(function(t){e.error=t.message})},updateConfig:function(t){var e=this;confirm("Подтвердите обновление элемента '"+t.name+"'")&&this.$store.dispatch("configs/updateConfig",t).then(function(){e.showSuccess("Конфигурация успешно обновлена")}).catch(function(t){e.error=t.message}),this.editMode=!1},clearForm:function(){this.config.name="",this.config.value="",this.config.description=""},enableEditMode:function(t){this.editMode=!0,this.seletedConfig.id=t.id},disableEditMode:function(){this.editMode=!1},showSuccess:function(t){var e=this;this.success=t,setTimeout(function(){e.success=null},3e3)}}},c=a,r=(i("20bd"),i("2877")),d=Object(r["a"])(c,n,s,!1,null,"1296f087",null);e["default"]=d.exports},a768:function(t,e,i){}}]);
//# sourceMappingURL=chunk-15a66576.37ad8bcd.js.map